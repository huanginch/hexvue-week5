import{_ as f,o as i,c,a as e,t as l,w as v,m as w,d as k,r as a,F as p,e as M,n as h,b as d,h as F,i as b,j as L}from"./index-898e4de4.js";const N={name:"DeleteConfirmModal",props:["message","delFunc"],data(){return{modal:null}},methods:{open(){this.modal.show()},hide(){this.modal.hide()}},mounted(){this.modal=new window.bootstrap.Modal(document.getElementById("deleteModal"))}},V={id:"deleteModal",class:"modal text-black fade",tabindex:"-1"},x={class:"modal-dialog"},B={class:"modal-content rounded-0"},T=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"再次確認"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),A={class:"modal-body"},D={class:"modal-footer"},S=e("button",{type:"button",class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"}," 取消 ",-1);function E(o,s,r,y,n,u){return i(),c("div",V,[e("div",x,[e("div",B,[T,e("div",A,[e("p",null,l(r.message),1)]),e("div",D,[S,e("button",{type:"button",class:"btn btn-primary rounded-0",onClick:s[0]||(s[0]=v(m=>{u.hide(),r.delFunc()},["prevent"]))}," 確定 ")])])])])}const Q=f(N,[["render",E]]);const j={name:"CartView",data(){return{message:"",delFunc:null}},computed:{...w(b,["carts","totalCart","final_total","isLoading"])},methods:{...k(b,["setCartQty","removeCart","removeAllCart"])},components:{DeleteConfirmModal:Q}},q={class:"cart container"},z=e("h1",null,"我的購物車",-1),U={class:"table text-white align-middle"},G=e("thead",null,[e("tr",null,[e("th",{scope:"col"}),e("th",{scope:"col"},"商品名稱"),e("th",{scope:"col"},"數量"),e("th",{scope:"col"},"商品價格"),e("th",{scope:"col"},"小計")])],-1),H={scope:"row"},J=["onClick"],K=["value","onChange"],O={class:"text-end"},P=e("hr",null,null,-1),R={class:"float-end"};function W(o,s,r,y,n,u){const m=a("iconify-icon"),C=a("router-link"),g=a("delete-confirm-modal"),$=a("MyLoading");return i(),c(p,null,[e("div",q,[z,e("table",U,[G,e("tbody",null,[(i(!0),c(p,null,M(o.carts,t=>(i(),c("tr",{key:t.id},[e("th",H,[e("button",{type:"button",class:"btn rounded-0 text-white",onClick:_=>{this.$refs.deleteModal.open(),n.message=`確定要刪除 ${t.product.title} 嗎?`,n.delFunc=o.removeCart.bind(this,t.id)}},[d(m,{icon:"material-symbols:delete-outline-sharp",class:"text-success fs-4 align-middle"})],8,J)]),e("td",null,l(t.product.title),1),e("td",null,[e("input",{type:"number",class:"form-control w-50",value:t.qty,onChange:_=>o.setCartQty(t.id,_),min:"1"},null,40,K)]),e("td",null,"$NT "+l(t.product.price),1),e("td",null,"$NT "+l(t.final_total),1)]))),128))])]),e("p",O,"總價格: $NT "+l(o.final_total),1),P,e("div",R,[e("a",{class:h(["btn btn-outline-primary me-3 rounded-0",{disabled:!o.totalCart}]),onClick:s[0]||(s[0]=v(t=>{n.message="確定要清空購物車嗎?",n.delFunc=o.removeAllCart,this.$refs.deleteModal.open()},["prevent"]))},"清空購物車",2),d(C,{to:"/checkout",class:h(["btn btn-primary rounded-0",{disabled:!o.totalCart}])},{default:F(()=>[L("結帳")]),_:1},8,["class"])])]),d(g,{ref:"deleteModal",message:n.message,"del-func":n.delFunc},null,8,["message","del-func"]),d($,{active:o.isLoading,"onUpdate:active":s[1]||(s[1]=t=>o.isLoading=t)},null,8,["active"])],64)}const Y=f(j,[["render",W]]);export{Y as default};
